INCLUDE_DIRECTORIES(bochs)

SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS_DEBUG} -O0 -g")

SET(X86I_HEADERS x86i.h)
SET(BOCHS_SOURCES bochs/fetchdecode64.cc)
SET(BOCHS_HEADERS bochs/ia_opcodes.h bochs/fetchdecode_x87.h bochs/fetchdecode_sse.h)
SET(X86I_SOURCES ${X86I_HEADERS} ${BOCHS_HEADERS} ${BOCHS_SOURCES} main.c decode64.c)

SET(X86I_EXECUTABLE x86i_executable)
SET(X86I_EXECUTABLE_OUTPUT x86i)
ADD_EXECUTABLE(${X86I_EXECUTABLE} ${X86I_SOURCES})
SET_TARGET_PROPERTIES(${X86I_EXECUTABLE} PROPERTIES OUTPUT_NAME ${X86I_EXECUTABLE_OUTPUT})
TARGET_LINK_LIBRARIES(${X86I_EXECUTABLE} pthread)
